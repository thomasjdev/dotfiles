###
# Variables & Exports
###

# Configure better python dev
export PIP_REQUIRE_VIRTUALENV=true
export PIP_DOWNLOAD_CACHE=$HOME/.pip/cache
gpip() {
    PIP_REQUIRE_VIRTUALENV="" pip "$@"
}

# Load our AWS environment defaults and aliases
export AWS_DEFAULT_PROFILE='personal'

# Set preffered editor
export EDITOR='code -n -w'

# Setup for Vagrant VMware development
export VAGRANT_VMWARE_CLONE_DIRECTORY="$HOME/.vagrant.vm"
export VAGRANT_DEFAULT_PROVIDER='vmware_fusion'

# We like to change our Project structure from time to time
export DEVTLD="$HOME/Code"

###
# Helper functions
###

_terraform_aws_profile() {
  if [ -z $1 ]; then return; fi
  export TF_VAR_aws_access_key=$(aws configure get $1.aws_access_key_id)
  export TF_VAR_aws_secret_key=$(aws configure get $1.aws_secret_access_key)
}

# Allow gpg controlled SSH keys
#  if [[ -x /usr/local/bin/gpgconf ]]; then
#    gpgconf --launch gpg-agent
#    export GPG_TTY=$(tty)
#    export SSH_AUTH_SOCK=$HOME/.gnupg/S.gpg-agent.ssh
#  fi

if type pyenv &> /dev/null; then
    eval "$(pyenv init - zsh)"
fi

if type "pyenv-virtualenv" &> /dev/null; then
    eval "$(pyenv virtualenv-init - zsh)"
fi

if [[ -x /usr/local/bin/direnv ]]; then
  eval "$(direnv hook zsh)"
fi